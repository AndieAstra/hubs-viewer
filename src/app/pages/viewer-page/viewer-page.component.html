<div class="unity-layout">

  <!-- ðŸ” Top Toolbar -->
  <header class="top-toolbar">
    <div class="toolbar-center">
      <div class="upload-instructions">

        <p><strong>{{ 'UPLOAD.INSTRUCTIONS' | translate }}</strong></p>

        <app-uploader (fileLoaded)="onFileLoaded($event)"></app-uploader>
      </div>
    </div>
  </header>

  <!-- ðŸ§± Main Body: Sidebar + Canvas -->
  <div class="main-body">

    <!-- ðŸ“ Left Sidebar: Buttons + Sliders -->
    <aside class="sidebar-left">

      <!-- ðŸŽ›ï¸ Top Buttons -->

      <div class="sidebar-button-row">

      <button class="kid-button purple" (click)="startTutorial()">
        {{ 'BUTTONS.TUTORIAL' | translate }}
      </button>

      <button class="kid-button danger small" (click)="openBugReport()">
        {{ 'BUTTONS.BUG_REPORT' | translate }}
      </button>

      </div>


      <!-- ðŸ“± Mobile VR Buttons -->
      <div class="mobile-only-buttons">

      <button class="kid-button green" (click)="enterVRMode()">{{ 'BUTTONS.ENTER_VR' | translate }}</button>

        @if(viewerRef?.isVRMode) {

        <button class="kid-button danger" (click)="exitVRMode()">
          {{ 'BUTTONS.EXIT_VR' | translate }}
        </button>

        }
      </div>

      <!-- ðŸ”§ Scene Buttons -->
      <h4>{{ 'SECTIONS.SCENE_SETTINGS' | translate }}</h4>

<!-- *********************************************** -->

      <button class="kid-button" (click)="toggleWireframe()">
        <img src="assets/icons/new_rotate.png" alt="Reset" />
        <span>Toggle Wireframe</span>
      </button>

<!-- *********************************************** -->

      <button class="kid-button" (click)="resetView()">
        <img src="assets/icons/new_rotate.png" alt="Reset" />
        <span>{{ 'BUTTONS.RESET_CAMERA' | translate }}</span>
      </button>


      <button class="kid-button turquoise" (click)="save()">
        <img src="assets/icons/save.jpg" alt="Save" />
        <span>{{ 'BUTTONS.SAVE_SCENE' | translate }}</span>
      </button>


      <button class="kid-button purple" (click)="load()">
        <img src="assets/icons/upload.png" alt="Load" />
        <span>{{ 'BUTTONS.LOAD_SCENE' | translate }}</span>
      </button>


      <!-- ðŸ’¡ Lighting -->
      <h4>{{ 'SECTIONS.LIGHTING' | translate }}</h4>
      <button class="kid-button green" (click)="toggleLightcolor()">
        <img src="assets/icons/reset.png" alt="Light Color" />
        <span>{{ 'BUTTONS.SUNLIGHT_COLOR' | translate }}</span>
      </button>
      <button class="kid-button orange" (click)="toggleRoomLight()">
        <img src="assets/icons/wire.jpg" alt="Room Light" />
        <span>{{ 'BUTTONS.ROOM_LIGHT' | translate }}</span>
      </button>

      <div class="kid-slider">
        <label for="sunlight">{{ 'SLIDERS.SUNLIGHT' | translate }}</label>
        <input type="range" (input)="onSunlightInput($event)">
      </div>

      <!-- ðŸ“ Model Controls -->
      <h4>{{ 'SECTIONS.MODEL_SETTINGS' | translate }}</h4>
      <div class="kid-slider">
        <label for="modelSize">{{ 'SLIDERS.MODEL_SIZE' | translate }}</label>
        <input type="range" (input)="onModelSizeInput($event)">
      </div>
      <div class="kid-slider">
        <label for="modelHeight">{{ 'SLIDERS.MODEL_HEIGHT' | translate }}</label>
        <input type="range" (input)="onModelHeightInput($event)">
      </div>

      <!-- ðŸŽ¥ Camera Controls -->
      <h4>{{ 'SECTIONS.CAMERA_MOVEMENT' | translate }}</h4>
      <div class="kid-slider">
        <label for="speed">{{ 'SLIDERS.SPEED' | translate }}</label>
        <input type="range" (input)="onSpeedInput($event)">
      </div>
      <div class="kid-slider">
        <label for="eyeLevel">{{ 'SLIDERS.EYE_LEVEL' | translate }}</label>
        <input type="range" (input)="onEyeLevelInput($event)">
      </div>

    </aside>

    <!-- ðŸ–¼ï¸ Canvas Display -->
    <div class="canvas-container">
      <app-viewer [glbFile]="selectedFile" #viewerRef></app-viewer>
    </div>

  </div>

  <!-- ðŸ“Œ Bottom Console -->
  <footer class="bottom-bar">
    <div class="tabs">
      <button (click)="toggleConsole()">
        {{ 'CONSOLE.TOGGLE' | translate }} {{ showConsole ? 'â–¼' : 'â–²' }}
      </button>
    </div>

    @if (showConsole) {
      <div class="assets-browser">
        <div class="assets-tree">
          <div class="error-bar">
            <ul>
              @for (message of consoleMessages; track message) {
                <li>{{ message }}</li>
              }
            </ul>
          </div>
        </div>
      </div>
    }
  </footer>

</div>
